
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="The HOT Tasking Manager">
      
      
      
        <link rel="canonical" href="https://www.hotosm.org/developers/development-setup/">
      
      
        <link rel="prev" href="../contributing-guidelines/">
      
      
        <link rel="next" href="../review-pr/">
      
      
      <link rel="icon" href="../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.42">
    
    
      
        <title>Development Setup - tasking-manager</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#development-setup" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="tasking-manager" class="md-header__button md-logo" aria-label="tasking-manager" data-md-component="logo">
      
  <img src="../../images/hot_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            tasking-manager
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Development Setup
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hotosm/tasking-manager/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    hotosm/tasking-manager
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="tasking-manager" class="md-nav__button md-logo" aria-label="tasking-manager" data-md-component="logo">
      
  <img src="../../images/hot_logo.png" alt="logo">

    </a>
    tasking-manager
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hotosm/tasking-manager/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    hotosm/tasking-manager
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    For Developers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            For Developers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../code_of_conduct/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code Of Conduct
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing-guidelines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing Guidelines
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Development Setup
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Development Setup
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="Page contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Page contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osm-auth" class="md-nav__link">
    <span class="md-ellipsis">
      OSM Auth
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-the-dot-env-file" class="md-nav__link">
    <span class="md-ellipsis">
      Configure The Dot Env File
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker" class="md-nav__link">
    <span class="md-ellipsis">
      Docker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-tasking-manager" class="md-nav__link">
    <span class="md-ellipsis">
      Running Tasking Manager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Running Tasking Manager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optional-changing-the-dev-port-or-dotenv-file" class="md-nav__link">
    <span class="md-ellipsis">
      (Optional) Changing the dev port or dotenv file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-overriding-docker-composeyml" class="md-nav__link">
    <span class="md-ellipsis">
      (Optional) Overriding docker-compose.yml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#external-or-self-hosted-database" class="md-nav__link">
    <span class="md-ellipsis">
      External or Self Hosted Database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frontend-only-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Frontend Only Deployment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-components-standalone" class="md-nav__link">
    <span class="md-ellipsis">
      Running Components Standalone
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Running Components Standalone">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frontend" class="md-nav__link">
    <span class="md-ellipsis">
      Frontend
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Frontend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#available-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      Available Scripts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Available Scripts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yarn-start" class="md-nav__link">
    <span class="md-ellipsis">
      yarn start
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yarn-test" class="md-nav__link">
    <span class="md-ellipsis">
      yarn test
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yarn-build" class="md-nav__link">
    <span class="md-ellipsis">
      yarn build
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#learn-more" class="md-nav__link">
    <span class="md-ellipsis">
      Learn More
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend" class="md-nav__link">
    <span class="md-ellipsis">
      Backend
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dependencies_1" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Install Dependencies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tests" class="md-nav__link">
    <span class="md-ellipsis">
      Tests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#export-translatable-strings-to-enjson-source-file" class="md-nav__link">
    <span class="md-ellipsis">
      Export translatable strings to en.json source file
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database" class="md-nav__link">
    <span class="md-ellipsis">
      Database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migrations-with-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Migrations with docker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Migrations with docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-fresh-database" class="md-nav__link">
    <span class="md-ellipsis">
      Create a fresh database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-permissions-to-create-projects" class="md-nav__link">
    <span class="md-ellipsis">
      Set permissions to create projects
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      API Authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-authentication-on-remote-instance" class="md-nav__link">
    <span class="md-ellipsis">
      API Authentication on remote instance
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-info" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Info
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Additional Info">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-local-postgis-database-without-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a local PostGIS database without Docker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating a local PostGIS database without Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-the-postgis-database" class="md-nav__link">
    <span class="md-ellipsis">
      Creating the PostGIS database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dependencies_2" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-database-user-and-database" class="md-nav__link">
    <span class="md-ellipsis">
      Create the database user and database
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sysadmins-guide" class="md-nav__link">
    <span class="md-ellipsis">
      Sysadmins guide
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../review-pr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reviewing PRs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../submit-pr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Submitting a PR
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../translations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Translations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../versions-and-releases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Versions and Releases
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../error_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Error Codes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Deep Tech Dives
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Deep Tech Dives
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dataflow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Flow Diagrams
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tmschema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Database Schema
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../apidocs/html/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Class Hierarchy
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    For Sysadmins
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            For Sysadmins
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sysadmins/deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deployment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sysadmins/architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sysadmins/migration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sysadmins/deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deployment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sysadmins/customize/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Customize
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sysadmins/ci-cd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CI
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../working-groups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working Groups
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../validation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LICENSE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="Page contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Page contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osm-auth" class="md-nav__link">
    <span class="md-ellipsis">
      OSM Auth
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-the-dot-env-file" class="md-nav__link">
    <span class="md-ellipsis">
      Configure The Dot Env File
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker" class="md-nav__link">
    <span class="md-ellipsis">
      Docker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-tasking-manager" class="md-nav__link">
    <span class="md-ellipsis">
      Running Tasking Manager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Running Tasking Manager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optional-changing-the-dev-port-or-dotenv-file" class="md-nav__link">
    <span class="md-ellipsis">
      (Optional) Changing the dev port or dotenv file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-overriding-docker-composeyml" class="md-nav__link">
    <span class="md-ellipsis">
      (Optional) Overriding docker-compose.yml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#external-or-self-hosted-database" class="md-nav__link">
    <span class="md-ellipsis">
      External or Self Hosted Database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frontend-only-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Frontend Only Deployment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-components-standalone" class="md-nav__link">
    <span class="md-ellipsis">
      Running Components Standalone
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Running Components Standalone">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frontend" class="md-nav__link">
    <span class="md-ellipsis">
      Frontend
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Frontend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#available-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      Available Scripts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Available Scripts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yarn-start" class="md-nav__link">
    <span class="md-ellipsis">
      yarn start
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yarn-test" class="md-nav__link">
    <span class="md-ellipsis">
      yarn test
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yarn-build" class="md-nav__link">
    <span class="md-ellipsis">
      yarn build
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#learn-more" class="md-nav__link">
    <span class="md-ellipsis">
      Learn More
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend" class="md-nav__link">
    <span class="md-ellipsis">
      Backend
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dependencies_1" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Install Dependencies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tests" class="md-nav__link">
    <span class="md-ellipsis">
      Tests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#export-translatable-strings-to-enjson-source-file" class="md-nav__link">
    <span class="md-ellipsis">
      Export translatable strings to en.json source file
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database" class="md-nav__link">
    <span class="md-ellipsis">
      Database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migrations-with-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Migrations with docker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Migrations with docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-fresh-database" class="md-nav__link">
    <span class="md-ellipsis">
      Create a fresh database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-permissions-to-create-projects" class="md-nav__link">
    <span class="md-ellipsis">
      Set permissions to create projects
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      API Authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-authentication-on-remote-instance" class="md-nav__link">
    <span class="md-ellipsis">
      API Authentication on remote instance
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-info" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Info
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Additional Info">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-local-postgis-database-without-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a local PostGIS database without Docker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating a local PostGIS database without Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-the-postgis-database" class="md-nav__link">
    <span class="md-ellipsis">
      Creating the PostGIS database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dependencies_2" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-database-user-and-database" class="md-nav__link">
    <span class="md-ellipsis">
      Create the database user and database
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sysadmins-guide" class="md-nav__link">
    <span class="md-ellipsis">
      Sysadmins guide
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="development-setup">Development setup<a class="headerlink" href="#development-setup" title="Permanent link">&para;</a></h1>
<h2 id="architecture">Architecture<a class="headerlink" href="#architecture" title="Permanent link">&para;</a></h2>
<p>The Tasking Manager is composed of two parts:</p>
<ul>
<li><strong>Frontend</strong>: A user interface built using React.</li>
<li><strong>Backend</strong>: A database and API built using Python.</li>
</ul>
<p>The two parts can be developed independently of each other.</p>
<h2 id="osm-auth">OSM Auth<a class="headerlink" href="#osm-auth" title="Permanent link">&para;</a></h2>
<p>The Tasking Manager uses OAuth2 with OSM to authenticate users.</p>
<p>In order to use the frontend, you may need to create keys for OSM:</p>
<ol>
<li><a href="https://www.openstreetmap.org/login" title="Login to OSM">Login to OSM</a>
   (<em>If you do not have an account yet, click the signup
   button at the top navigation bar to create one</em>).</li>
</ol>
<p>Click the drop down arrow on the top right of the navigation bar
   and select My Settings.</p>
<ol>
<li>Register your Tasking Manager instance to OAuth 2 applications.</li>
</ol>
<p>Put your login redirect url as <code>http://127.0.0.1:3000/authorized</code></p>
<blockquote>
<p>Note: <code>127.0.0.1</code> is required for debugging instead of <code>localhost</code>
due to OSM restrictions.</p>
</blockquote>
<ol>
<li>
<p>Permissions required:</p>
<ul>
<li>Read user preferences (read_prefs).</li>
<li>Modify the map (write_api).</li>
</ul>
</li>
<li>
<p>Now save your Client ID and Client Secret for the next step.</p>
</li>
</ol>
<h2 id="configure-the-dot-env-file">Configure The Dot Env File<a class="headerlink" href="#configure-the-dot-env-file" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Copy the <code>example.env</code> to <code>tasking-manager.env</code>.</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>example.env<span class="w"> </span>tasking-manager.env
</code></pre></div>
</li>
<li>
<p>Update the following variables</p>
<div class="highlight"><pre><span></span><code>TM_CLIENT_ID=from-previous-step
TM_CLIENT_SECRET=from-previous-step
</code></pre></div>
</li>
</ol>
<blockquote>
<p>If you are a frontend developer and do not wish to configure the
backend, you can use our staging server API.</p>
<p>Update the variable:</p>
<p><code>TM_APP_API_URL='https://tasking-manager-staging-api.hotosm.org'</code></p>
<p>before running the <code>yarn start</code> command.</p>
<p>Be aware that the staging API can be offline while we are deploying
newer versions to the staging server and that you'll not have access
to some management views due to permissions. Check the
<a href="#configuration">configuration</a> section to learn more about how
to configure Tasking Manager.</p>
</blockquote>
<p>For more details see the <a href="#configuration">configuration section</a>.</p>
<h2 id="docker">Docker<a class="headerlink" href="#docker" title="Permanent link">&para;</a></h2>
<p>The easiest option to get started with all components may be using Docker.</p>
<h3 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h3>
<p><a href="https://docs.docker.com/engine/install/">Docker Engine</a> must be available locally.</p>
<h3 id="running-tasking-manager">Running Tasking Manager<a class="headerlink" href="#running-tasking-manager" title="Permanent link">&para;</a></h3>
<p>Once you have the docker engine running, Quickly generate an environment file from an existing <code>example.env</code>.
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>example.env<span class="w"> </span>tasking-manager.env
</code></pre></div></p>
<p>Now you can proceed with starting the services.</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>--env-file<span class="w"> </span>tasking-manager.env<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>
<p>Tasking Manager should be available from:
<a href="http://127.0.0.1:3000">http://127.0.0.1:3000</a></p>
<h4 id="optional-changing-the-dev-port-or-dotenv-file">(Optional) Changing the dev port or dotenv file<a class="headerlink" href="#optional-changing-the-dev-port-or-dotenv-file" title="Permanent link">&para;</a></h4>
<p>You change the default port from <code>3000</code> to any other port.</p>
<p>However, you must change your OAuth redirect URL to reflect this,
in addition to any variables including a port, e.g. TM_APP_BASE_URL.</p>
<p>The default dotenv file can also be changed.</p>
<p><div class="highlight"><pre><span></span><code><span class="nv">TM_DEV_PORT</span><span class="o">=</span><span class="m">9000</span><span class="w"> </span>docker<span class="w"> </span>compose<span class="w"> </span>--env-file<span class="w"> </span>tasking-manager.env<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>--env-file<span class="w"> </span>tasking-manager.env<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div></p>
<h4 id="optional-overriding-docker-composeyml">(Optional) Overriding <code>docker-compose.yml</code><a class="headerlink" href="#optional-overriding-docker-composeyml" title="Permanent link">&para;</a></h4>
<p>If you want to add custom configuration for the docker services. You can make a copy of <code>docker-compose.override.sample.yml</code> which you can edit as per your need.</p>
<p>Create an override file from sample.
<div class="highlight"><pre><span></span><code>cp docker-compose.override.sample.yml docker-compose.override.yml
</code></pre></div></p>
<h3 id="external-or-self-hosted-database">External or Self Hosted Database<a class="headerlink" href="#external-or-self-hosted-database" title="Permanent link">&para;</a></h3>
<p>If you want to use your local postgresql server or some other exter database service.
Find these sets of environment variables in <code>tasking-manager.env</code>
<div class="highlight"><pre><span></span><code><span class="nv">POSTGRES_DB</span><span class="o">=</span>tasking-manager
<span class="nv">POSTGRES_USER</span><span class="o">=</span>tm
<span class="nv">POSTGRES_PASSWORD</span><span class="o">=</span>tm
<span class="nv">POSTGRES_ENDPOINT</span><span class="o">=</span>&lt;replace-with-your-database-endpoint&gt;
<span class="nv">POSTGRES_PORT</span><span class="o">=</span><span class="m">5432</span>
</code></pre></div></p>
<blockquote>
<p><strong><em>NOTE:</em></strong>  If database server is self managed on your local machine, Use your machine's ip address. Also make sure it can be reachable from <code>tm-backend</code> container.</p>
</blockquote>
<p>Once Updated, recreate containers with
<div class="highlight"><pre><span></span><code>docker compose --env-file tasking-manager.env up -d
</code></pre></div></p>
<h3 id="frontend-only-deployment">Frontend Only Deployment<a class="headerlink" href="#frontend-only-deployment" title="Permanent link">&para;</a></h3>
<p>If you are looking to deploy only Frontend service with docker, You will need to make sure the following env vars are corrent in <code>tasking-manager.env</code></p>
<p><div class="highlight"><pre><span></span><code>TM_APP_API_URL=http://127.0.0.1:5000
</code></pre></div>
This refers to the backend service that you are going to consume, If you don't have a Tasking Manager backend instance you can use the staging server hosted by hotosm.
<div class="highlight"><pre><span></span><code>TM_APP_API_URL=https://tasking-manager-staging-api.hotosm.org
</code></pre></div>
Then proceed with starting only frontend service with docker.
<div class="highlight"><pre><span></span><code>docker compose --env-file tasking-manager.env up -d tm-frontend
</code></pre></div></p>
<p>Check server logs with
<div class="highlight"><pre><span></span><code>docker logs tasking-manager-main-tm-frontend-1 -f

&gt; TaskingManager-frontend@0.1.0 patch-rapid
&gt; bash -c &quot;cp patch/rapid-imagery.min.json public/static/rapid/data/imagery.min.json&quot;

ℹ ｢wds｣: Project is running at http://172.22.0.2/
ℹ ｢wds｣: webpack output is served from
ℹ ｢wds｣: Content not from webpack is served from /usr/src/app/public
ℹ ｢wds｣: 404s will fallback to /
Starting the development server...

Compiled successfully!

You can now view TaskingManager-frontend in the browser.

  Local:            http://localhost:3000
  On Your Network:  http://172.22.0.2:3000

Note that the development build is not optimized.
To create a production build, use yarn build.
</code></pre></div>
For OSM related <code>CLIENT_ID</code> and <code>SECRETS</code> check <a href="#osm-auth">OSM AUTH</a> section.</p>
<h2 id="running-components-standalone">Running Components Standalone<a class="headerlink" href="#running-components-standalone" title="Permanent link">&para;</a></h2>
<h3 id="frontend">Frontend<a class="headerlink" href="#frontend" title="Permanent link">&para;</a></h3>
<p>The client is the front-end user interface of the Tasking Manager. It is based on the React framework and you can find all files in the <code>frontend</code> directory.</p>
<h4 id="dependencies">Dependencies<a class="headerlink" href="#dependencies" title="Permanent link">&para;</a></h4>
<p>The following dependencies must be available <em>globally</em> on your system:
* Download and install <a href="https://nodejs.org/en/">NodeJS LTS v12+</a> and <a href="https://classic.yarnpkg.com/en/docs/install">yarn</a>
* Go into the <code>frontend</code> directory and execute <code>yarn</code>.</p>
<h4 id="available-scripts">Available Scripts<a class="headerlink" href="#available-scripts" title="Permanent link">&para;</a></h4>
<p>In the project directory, you can run:</p>
<h5 id="yarn-start"><code>yarn start</code><a class="headerlink" href="#yarn-start" title="Permanent link">&para;</a></h5>
<p>Runs the app in the development mode.<br>
Open <a href="http://localhost:3000">http://localhost:3000</a> to view it in the browser.</p>
<p>The page will reload if you make edits.<br>
You will also see any lint errors in the console.</p>
<h5 id="yarn-test"><code>yarn test</code><a class="headerlink" href="#yarn-test" title="Permanent link">&para;</a></h5>
<p>Launches the test runner in the interactive watch mode.<br>
See the section about <a href="https://facebook.github.io/create-react-app/docs/running-tests">running tests</a> for more information.</p>
<h5 id="yarn-build"><code>yarn build</code><a class="headerlink" href="#yarn-build" title="Permanent link">&para;</a></h5>
<p>Builds the app for production to the <code>build</code> folder.<br>
It correctly bundles React in production mode and optimizes the build for the best performance.</p>
<p>The build is minified and the filenames include the hashes.<br>
Your app is ready to be deployed!</p>
<p>See the section about <a href="https://facebook.github.io/create-react-app/docs/deployment">deployment</a> for more information.</p>
<h4 id="learn-more">Learn More<a class="headerlink" href="#learn-more" title="Permanent link">&para;</a></h4>
<p>You can learn more in the <a href="https://facebook.github.io/create-react-app/docs/getting-started">Create React App documentation</a>.</p>
<p>To learn React, check out the <a href="https://reactjs.org/">React documentation</a>.</p>
<h3 id="backend">Backend<a class="headerlink" href="#backend" title="Permanent link">&para;</a></h3>
<p>The backend is made up of a postgres database and an associated API
that calls various end points to create tasks, manage task state, and
produce analytics.</p>
<h4 id="dependencies_1">Dependencies<a class="headerlink" href="#dependencies_1" title="Permanent link">&para;</a></h4>
<ul>
<li><a href="https://www.python.org/downloads/">Python 3.7+</a></li>
<li>Python 3.7 is what HOT uses in production. You can use Python 3.8 too.</li>
<li><a href="https://www.postgresql.org/download/">PostgreSQL</a> with <a href="https://postgis.net/install/">PostGIS</a></li>
<li><a href="https://pip.pypa.io/en/stable/installing/">pip</a></li>
<li><a href="https://trac.osgeo.org/geos/">libgeos-dev</a></li>
</ul>
<p>You can check the
<a href="https://github.com/hotosm/tasking-manager/blob/develop/Dockerfile">Dockerfile</a>
to have a reference of how to install it in a Debian/Ubuntu system.</p>
<h4 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h4>
<p>There are two ways to configure Tasking Manager. You can set some
environment variables on your shell or you can define the
configuration in the <code>tasking-manager.env</code> file on the repository root
directory. To use that last option, follow the below instructions:</p>
<ul>
<li>Copy the example configuration file to start your own configuration:
  <code>cp example.env tasking-manager.env</code>.</li>
<li>Adjust the <code>tasking-manager.env</code> configuration file to fit your configuration.</li>
<li>Make sure that the following variables are set correctly in the
  <code>tasking-manager.env</code> configuration file:</li>
<li><code>TM_APP_BASE_URL</code>=web-server-endpoint</li>
<li><code>POSTGRES_DB</code>=tasking-manager-database-name</li>
<li><code>POSTGRES_USER</code>=database-user-name</li>
<li><code>POSTGRES_PASSWORD</code>=database-user-password</li>
<li><code>POSTGRES_ENDPOINT</code>=database-endpoint-can-be-localhost</li>
<li><code>POSTGRES_PORT</code>=database-port</li>
<li><code>TM_SECRET</code>=define-freely-any-number-and-letter-combination</li>
<li><code>TM_CLIENT_ID</code>=oauth-client-id-from-openstreetmap</li>
<li><code>TM_CLIENT_SECRET</code>=oauth-client-secret-key-from-openstreetmap</li>
<li><code>TM_REDIRECT_URI</code>=oauth-client-redirect_uri</li>
<li><code>TM_SCOPE</code>=oauth-client-scopes</li>
<li><code>TM_LOG_DIR=logs</code></li>
</ul>
<p>In order to send email correctly, set these variables as well:
  - <code>TM_SMTP_HOST</code>
  - <code>TM_SMTP_PORT</code>
  - <code>TM_SMTP_USER</code>
  - <code>TM_SMTP_PASSWORD</code>
  - <code>TM_SMTP_USE_TLS=0</code>
  - <code>TM_SMTP_USE_SSL=1</code> (Either TLS or SSL can be set to 1 but not both)</p>
<h4 id="install-dependencies">Install Dependencies<a class="headerlink" href="#install-dependencies" title="Permanent link">&para;</a></h4>
<ul>
<li>Install project dependencies:</li>
<li>First ensure the Python version in <code>pyproject.toml:requires-python</code> is installed on your system.</li>
<li><code>pip install --upgrade uv</code></li>
<li><code>uv sync</code></li>
</ul>
<h4 id="tests">Tests<a class="headerlink" href="#tests" title="Permanent link">&para;</a></h4>
<p>The project includes a suite of Unit and Integration tests that you
should run after any changes.</p>
<p><div class="highlight"><pre><span></span><code>python3 -m unittest discover tests/backend
</code></pre></div>
or
<div class="highlight"><pre><span></span><code>uv run test
</code></pre></div></p>
<h4 id="export-translatable-strings-to-enjson-source-file">Export translatable strings to en.json source file<a class="headerlink" href="#export-translatable-strings-to-enjson-source-file" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>cd frontend &amp;&amp; yarn build-locales
</code></pre></div>
<h3 id="database">Database<a class="headerlink" href="#database" title="Permanent link">&para;</a></h3>
<h3 id="migrations-with-docker">Migrations with docker<a class="headerlink" href="#migrations-with-docker" title="Permanent link">&para;</a></h3>
<p>You need to delete all the versions in ./migrations/version.
Then, import the new model into the file ./backend/<strong>init</strong>.py
Finally, enter inside the migration container and run:</p>
<div class="highlight"><pre><span></span><code>python manage.py db migrate
</code></pre></div>
<p>and</p>
<div class="highlight"><pre><span></span><code>python manage.py db upgrade
</code></pre></div>
<h4 id="create-a-fresh-database">Create a fresh database<a class="headerlink" href="#create-a-fresh-database" title="Permanent link">&para;</a></h4>
<p>We use
<a href="https://flask-migrate.readthedocs.io/en/latest/">Flask-Migrate</a> to
create the database from the migrations directory. Check the
instructions on how to setup a PostGIS database with
<a href="#creating-a-local-postgis-database-with-docker">docker</a> or on your
<a href="#creating-a-local-postgis-database-without-docker">local system</a>. Then you can execute the following
command to apply the migrations:</p>
<p><div class="highlight"><pre><span></span><code>flask db upgrade
</code></pre></div>
or
<div class="highlight"><pre><span></span><code>uv run upgrade
</code></pre></div></p>
<h4 id="set-permissions-to-create-projects">Set permissions to create projects<a class="headerlink" href="#set-permissions-to-create-projects" title="Permanent link">&para;</a></h4>
<p>To be able to create projects and have full permissions as an admin
user inside TM, login to the TM with your OSM account to populate your
user information in the database, then execute the following command
on your terminal (with the OS user that is the owner of the database):</p>
<p><code>psql -d &lt;your_database&gt; -c "UPDATE users set role = 1 where username = '&lt;your_osm_username&gt;'"</code></p>
<h2 id="api">API<a class="headerlink" href="#api" title="Permanent link">&para;</a></h2>
<p>If you plan to only work on the API you only have to build the backend
architecture. Install the backend dependencies, and run the server:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Install dependencies</span>
uv<span class="w"> </span>sync

<span class="c1"># Run (Option 1)</span>
uv<span class="w"> </span>run<span class="w"> </span>start

<span class="c1"># Run (Option 2)</span>
uv<span class="w"> </span>run<span class="w"> </span>flask<span class="w"> </span>run<span class="w"> </span>--debug<span class="w"> </span>--reload
</code></pre></div>
<p>You can access the API documentation on
<a href="http://localhost:5000/api-docs">http://localhost:5000/api-docs</a>, it
also allows you to execute requests on your local TM instance. The API
docs is also available on our
<a href="https://tasks.hotosm.org/api-docs">production</a> and
<a href="https://tasks-stage.hotosm.org/api-docs/">staging</a> instances.</p>
<h3 id="api-authentication">API Authentication<a class="headerlink" href="#api-authentication" title="Permanent link">&para;</a></h3>
<p>In order to authenticate on the API, you need to have an Authorization Token.</p>
<ol>
<li>Run the command line <code>manage.py</code> via <code>flask</code> with the <code>gen_token</code>
   option and <code>-u &lt;OSM_User_ID_number&gt;</code>. The command line can be run
   in any shell session as long as you are in the tasking-manager
   directory.</li>
</ol>
<div class="highlight"><pre><span></span><code>flask gen_token -u 99999999
</code></pre></div>
<p>This will generate a line that looks like this:</p>
<blockquote>
<p>Your base64 encoded session token: b'SWpFaS5EaEoxRlEubHRVC1DSTVJZ2hfalMc0xlalu3KRk5BUGk0'</p>
</blockquote>
<ol>
<li>In the Swagger UI, where it says<blockquote>
<p>Token sessionTokenHere==</p>
</blockquote>
</li>
</ol>
<p>replace <code>sessionTokenHere==</code> with the string of characters between the
apostrophes (' ') above so you end up with something that looks like
this in that field:</p>
<blockquote>
<p>Token SWpFaS5EaEoxRlEubHRVC1DSTVJZ2hfalMc0xlalu3KRk5BUGk0</p>
</blockquote>
<p>Your user must have logged in to the local testing instance once of
course and have the needed permissions for the API call.</p>
<p>You can get your OSM user id number either by finding it in your local
testing/dev database <code>select * from users</code> or from OSM by viewing the
edit history of your user, selecting a changeset from the list, and
then at the bottom link <code>Changeset XML</code> and it will be in the <code>uid</code>
field of the XML returned.</p>
<h3 id="api-authentication-on-remote-instance">API Authentication on remote instance<a class="headerlink" href="#api-authentication-on-remote-instance" title="Permanent link">&para;</a></h3>
<p>To get your token on the production or staging Tasking Manager
instances, sign in in the browser and then either:</p>
<ul>
<li>go to the user profile page, enable <em>Expert mode</em> in the settings,
  and copy the token from the <em>API Key</em> section.</li>
<li>inspect a network request and search for the <code>Authorization</code> field
  in the request headers section.</li>
</ul>
<h2 id="additional-info">Additional Info<a class="headerlink" href="#additional-info" title="Permanent link">&para;</a></h2>
<h3 id="creating-a-local-postgis-database-without-docker">Creating a local PostGIS database without Docker<a class="headerlink" href="#creating-a-local-postgis-database-without-docker" title="Permanent link">&para;</a></h3>
<h4 id="creating-the-postgis-database">Creating the PostGIS database<a class="headerlink" href="#creating-the-postgis-database" title="Permanent link">&para;</a></h4>
<p>It may be the case you would like to set up the database without using
Docker for one reason or another. This provides you with a set of
commands to create the database and export the database address to
allow you to dive into backend development.</p>
<h4 id="dependencies_2">Dependencies<a class="headerlink" href="#dependencies_2" title="Permanent link">&para;</a></h4>
<p>First, ensure that Postgresql and PostGIS are installed and running on
your computer.</p>
<h4 id="create-the-database-user-and-database">Create the database user and database<a class="headerlink" href="#create-the-database-user-and-database" title="Permanent link">&para;</a></h4>
<p>Assuming you have sudo access and the unix Postgresql owner is <code>postgres</code>:</p>
<div class="highlight"><pre><span></span><code>$ sudo -u postgres psql
$ CREATE USER &quot;hottm&quot; PASSWORD &#39;hottm&#39;;
$ CREATE DATABASE &quot;tasking-manager&quot; OWNER &quot;hottm&quot;;
$ \c &quot;tasking-manager&quot;;
$ CREATE EXTENSION postgis;
</code></pre></div>
<p>Finally, add the environmental variable to access the database:</p>
<p><code>export TM_DB=postgresql://hottm:hottm@localhost/tasking-manager</code></p>
<p>It is possible to install and run the Tasking Manager using
<a href="https://docker.com">Docker</a> and <a href="https://docs.docker.com/compose/">Docker
Compose</a>.</p>
<p>Clone the Tasking Manager repository and use <code>docker compose --env-file tasking-manager.env up</code> to
get a working version of the API running.</p>
<h2 id="sysadmins-guide">Sysadmins guide<a class="headerlink" href="#sysadmins-guide" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="../../sysadmins/architecture/">System architecture</a></li>
<li><a href="../../sysadmins/ci-cd/">Managing CI/CD with CircleCI</a></li>
<li><a href="../../sysadmins/deployment/">Deployment Guide</a></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/hotosm/" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/hotosm" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.hotosm.org" target="_blank" rel="noopener" title="www.hotosm.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M352 256c0 22.2-1.2 43.6-3.3 64H163.4c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64h185.3c2.2 20.4 3.3 41.8 3.3 64m28.8-64h123.1c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64m112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6 78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7 10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5 11.6 26 20.9 58.2 27 94.7m-209 0H18.6c30-74.1 93.6-130.9 172-151.6-25.5 34.2-45.3 87.7-55.3 151.6M8.1 192h123.1c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64m186.6 254.6c-11.6-26-20.9-58.2-27-94.6h176.6c-6.1 36.4-15.5 68.6-27 94.6-10.5 23.6-22.2 40.7-33.5 51.5-11.2 10.7-20.5 13.9-27.8 13.9s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6-78.4-20.7-142-77.5-172-151.6zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6 25.5-34.2 45.2-87.7 55.3-151.6h116.7z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>